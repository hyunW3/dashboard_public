# Server Health Dashboard

**It is generated by Claude code. Be aware wrong information**

A real-time server health monitoring dashboard that displays CPU, GPU, memory, and OS information across multiple servers using Streamlit and Ansible.

## Overview

This dashboard provides a centralized web interface for monitoring distributed server infrastructure. It collects metrics from remote servers via SSH/Ansible and displays them in an interactive dashboard.

### Features

- **Health Status Monitoring** - Real-time server availability with color-coded indicators
- **CPU Metrics** - Load averages (1min, 5min, 15min) with visual progress bars
- **GPU Metrics** - Memory usage and utilization percentage per GPU
- **OS Information** - Operating system version tracking across servers
- **Auto-refresh** - Manual refresh button to collect latest metrics

## Architecture

```
┌─────────────────────┐     SSH      ┌──────────────────────┐
│  Streamlit UI       │─────────────▶│  Remote Servers      │
│  (app.py)           │◀─────────────│  (25+ servers)       │
└─────────────────────┘   Ansible    └──────────────────────┘
          │
          ▼
┌─────────────────────┐
│  JSON Data Files    │
│  ./info/            │
└─────────────────────┘
```

## Prerequisites

- Python 3.x
- Ansible
- SSH access to monitored servers
- `nvidia-smi` on remote servers (for GPU monitoring)

## Installation

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd dashboard_official
   ```

2. Install Python dependencies:
   ```bash
   pip install streamlit pandas pytz
   ```

3. Install Ansible:
   ```bash
   pip install ansible
   # or on Ubuntu/Debian
   sudo apt-get install ansible
   ```

4. Create data directories:
   ```bash
   mkdir -p info/cpu_status info/gpu_status info/os_status
   ```

## Configuration

### 1. Ansible Inventory (`hosts.ini`)

Configure your servers in the inventory file:

```ini
[your_cluster]
server1 ansible_host=192.168.1.100
server2 ansible_host=192.168.1.101

[your_cluster:vars]
ansible_port=22
ansible_user=your_user
```

### 2. SSH Config (`ssh_config`)

Set up SSH configuration for each server:

```
Host server1
    HostName 192.168.1.100
    Port 22
    User your_user
```

### 3. Update Hostname Mapping

Modify `get_hostname_mapping()` in `app.py` to match your server configuration.

## Usage

Start the dashboard:

```bash
streamlit run app.py
```

Access the dashboard at `http://localhost:8501`

### Dashboard Operations

1. View cached server status on startup
2. Click **Refresh Data** to collect fresh metrics from all servers
3. Monitor the **Updated at** timestamp for data freshness
4. Expand server lists to see detailed status

## Project Structure

```
dashboard_official/
├── app.py                 # Main Streamlit application
├── moniter_status.yml     # Ansible playbook for data collection
├── hosts.ini              # Ansible inventory file
├── ssh_config             # SSH configuration
├── sshd_config            # SSHD configuration reference
├── info/                  # Data storage directory
│   ├── cpu_status/        # CPU metrics JSON files
│   ├── gpu_status/        # GPU metrics JSON files
│   ├── os_status/         # OS information JSON files
│   └── health_status.json # Health status cache
└── README.md
```

## Collected Metrics

| Metric | Source Command | Data Location |
|--------|----------------|---------------|
| OS Info | `cat /etc/os-release` | `info/os_status/` |
| CPU Load | `top -b -n1` | `info/cpu_status/` |
| GPU Stats | `nvidia-smi --query-gpu=...` | `info/gpu_status/` |

## Status Indicators

| Color | Status |
|-------|--------|
| Green | Server operating normally |
| Red | Server unreachable |
| Yellow | Health check failed |

## License

MIT License
